/*
 * jQuery.fullscreen library v0.1
 * Copyright (c) 2012 Vladimir Zhuravlev
 * 
 * Released under MIT License
 * 
 * Date: Sun Jan 15 16:53:07 GST 2012
 **/(function(a){function c(b,c,d){var e=function(){};e.prototype=c.prototype,b.prototype=new e,b.prototype.constructor=b,c.prototype.constructor=c,b._super=c.prototype,d&&a.extend(b.prototype,d)}function b(a){return typeof a!="undefined"}var d=function(b){this.onStateChange=typeof b=="function"?b:a.noop,this.__state={fullscreen:!1},this.__options=null,this._fullScreenElement=null,this.__savedStyles={},this._init()};d.prototype={__DEFAULT_OPTIONS:{styles:{width:"100%",height:"100%",position:"fixed","z-index":"2147483647","box-sizing":"border-box",left:0,top:0,bottom:0,right:0},toggleClass:"",documentScroll:!1},__documentOverflow:"",_preventDocumentScroll:function(){this.__options.documentScroll||(this.__documentOverflow=a("body").css("overflow"),a("body").css("overflow","hidden"))},_allowDocumentScroll:function(){this.__options.documentScroll||a("body").css("overflow",this.__documentOverflow)},_init:function(){},_fullScreenChange:function(){this.isFullScreen()?this._triggerEvents():(this._allowDocumentScroll(),this._revertStyles(),this._triggerEvents(),this._fullScreenElement=null),this.state("fullscreen",this.isFullScreen())},_fullScreenError:function(){this._revertStyles(),this._fullScreenElement=null},_triggerEvents:function(){a(this._fullScreenElement).trigger(this.isFullScreen()?"fscreenopen":"fscreenclose"),a(document).trigger("fscreenchange",[this.isFullScreen(),this._fullScreenElement])},_saveAndApplyStyles:function(){var b=a(this._fullScreenElement);this.__savedStyles={};for(var c in this.__options.styles)this.__savedStyles[c]=b.css(c),b.css(c,this.__options.styles[c]);this.__options.toggleClass&&b.addClass(this.__options.toggleClass)},_revertStyles:function(){var b=a(this._fullScreenElement);for(var c in this.__options.styles)b.css(c,this.__savedStyles[c]);this.__options.toggleClass&&b.removeClass(this.__options.toggleClass)},state:function(a,c){if(!!b(a)){b(c)&&this.__state[a]!==c&&(this.__state[a]=c,this.onStateChange(a,c));return this.__state[a]}},requestFullScreen:function(b,c){b!==this._fullScreenElement&&(this.isFullScreen()&&this.exitFullScreen(),this._fullScreenElement=b,this.__options=a.extend(!0,{},this.__DEFAULT_OPTIONS,c),this._saveAndApplyStyles(),this._preventDocumentScroll())},getFullScreenElement:function(){return this._fullScreenElement},isFullScreen:null};var e=function(a){e._super.constructor.apply(this,arguments)};c(e,d,{_init:function(){e._super._init.apply(this,arguments),a(document).bind("fullscreenchange mozfullscreenchange webkitfullscreenchange",a.proxy(this._fullScreenChange,this)).bind("fullscreenerror mozfullscreenerror webkitfullscreenerror",a.proxy(this._fullScreenError,this))},requestFullScreen:function(a,b){e._super.requestFullScreen.apply(this,arguments);var c=a.requestFullScreen||a.mozRequestFullScreen||a.webkitRequestFullScreen;c.call(a)},exitFullScreen:function(){var a=document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen;a.call(document)},isFullScreen:function(){if(document.fullScreenElement&&document.fullScreenElement===null||b(document.mozFullScreen)&&!document.mozFullScreen||b(document.webkitIsFullScreen)&&!document.webkitIsFullScreen)return!1;return!0}});var f=function(){f._super.constructor.apply(this,arguments)};c(f,d,{__isFullScreen:!1,__allowedKeys:[37,39,38,40,32,0,0,0,0,9,224,16,17,18],__keydownHandler:function(a){if(!this.isFullScreen())return!0;var b=a.which;for(var c=0;c<this.__allowedKeys.length;++c)if(b===this.__allowedKeys[c])return!0;this.exitFullScreen();return!1},_init:function(){f._super._init.apply(this,arguments),a(document).delegate("*","keydown.fullscreen",a.proxy(this.__keydownHandler,this))},requestFullScreen:function(a){f._super.requestFullScreen.apply(this,arguments),this.__isFullScreen=!0,this._fullScreenChange()},exitFullScreen:function(){this.__isFullScreen=!1,this._fullScreenChange()},isFullScreen:function(){return this.__isFullScreen}});var g=b(document.fullScreen)||b(document.mozFullScreen)||b(document.webkitFullScreen)||b(document.webkitIsFullScreen),h={toggleClass:null,overflow:"hidden"};a.fullscreen=g?new e:new f,a.fn.fullscreen=function(b){var c=this.first()[0];b=a.extend({},h,b),b.styles={overflow:b.overflow},delete b.overflow,c&&a.fullscreen.requestFullScreen(c,b);return this}})(jQuery)